*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0f0f0f;--bg2:#1a1a1a;--bg3:#252525;--text:#f5f5f5;--text2:#a0a0a0;--acc:#6366f1;--suc:#22c55e;--warn:#f59e0b;--del:#ef4444}
body{font-family:-apple-system,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;-webkit-font-smoothing:antialiased}
.app.dark{--bg:#0f0f0f;--bg2:#1a1a1a;--bg3:#252525}
.app.light{--bg:#f5f5f5;--bg2:#fff;--bg3:#eee;--text:#1a1a1a;--text2:#666}
.hdr{display:flex;align-items:center;gap:1rem;padding:.75rem 1rem;background:var(--bg2);border-bottom:1px solid #333;flex-wrap:wrap}
.hdr h1{font-size:1rem}
.sb{flex:1;max-width:300px;padding:.5rem 1rem;background:var(--bg3);border:1px solid #333;border-radius:20px;color:var(--text)}
.hdr nav{display:flex;gap:.25rem}
.hdr nav button{padding:.5rem 1rem;background:0;border:1px solid transparent;color:var(--text2);border-radius:6px;cursor:pointer}
.hdr nav button.act{background:var(--acc);color:#fff}
.notif{position:fixed;bottom:1rem;right:1rem;background:var(--acc);color:#fff;padding:.75rem 1.5rem;border-radius:8px;z-index:1000;animation:slideIn .3s}
.undo{position:fixed;bottom:1rem;left:1rem;padding:.5rem 1rem;background:var(--bg3);border:1px solid #444;color:var(--text);border-radius:6px;cursor:pointer;z-index:1000}
.main{padding:1rem;max-width:1400px;margin:0 auto}
/* Topics View */
.tv{display:grid;grid-template-columns:200px 1fr;gap:1rem}
.tv .sb{position:sticky;top:1rem;height:fit-content;padding:.75rem;border-radius:10px;display:flex;flex-direction:column;gap:.5rem}
.tv .sb button{padding:.5rem;background:var(--acc);border:none;color:#fff;border-radius:6px;cursor:pointer}
.tv .sb>div{padding:.5rem .75rem;background:0;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:.5rem}
.tv .sb>div.sel{background:var(--bg3);border-left:3px solid var(--acc)}
.tv .tc{background:var(--bg2);border-radius:12px;padding:1rem}
.tv .th{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap;margin-bottom:1rem}
.tv .th .bi{font-size:2rem}
.tv .th input{font-size:1.5rem;font-weight:600;background:0;border:none;color:var(--text);flex:1}
.tv .th .btns{display:flex;gap:.25rem}
.tv .th .btns button{padding:.4rem .6rem;background:var(--bg3);border:1px solid #444;border-radius:6px;cursor:pointer;font-size:.8rem}
.tv .tg{display:flex;gap:.5rem;margin-bottom:1rem}
.tv .tg span{background:var(--acc);color:#fff;padding:.2rem .6rem;border-radius:20px;font-size:.75rem}
.tv textarea{width:100%;min-height:60px;padding:.75rem;background:var(--bg3);border:1px solid #333;border-radius:8px;color:var(--text);resize:vertical;margin-bottom:1rem}
.secg{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1rem}
.secg section,.phg section{background:var(--bg3);border-radius:10px;padding:1rem}
.secg h3,.phg h3{font-size:.85rem;color:var(--text2);margin-bottom:.75rem;text-transform:uppercase}
.pos{background:var(--bg2);padding:.75rem;border-radius:6px;border-left:3px solid var(--acc);margin-bottom:.5rem}
.secg section>div>div[contenteditable]{padding:.5rem;background:var(--bg2);border-radius:6px;min-height:40px}
.secg section button{margin-top:.5rem;padding:.4rem .8rem;background:0;border:1px dashed #444;color:var(--text2);border-radius:6px;cursor:pointer;width:100%}
.phg{display:flex;gap:.5rem;overflow-x:auto;padding:.5rem 0}
.phg>div{padding:.6rem 1rem;background:var(--bg3);border-radius:8px;min-width:100px;text-align:center}
.phg>div.complete{background:rgba(34,197,94,.1)}
.phg>div.complete span{background:var(--suc)}
.phg>div.in_progress{border-color:var(--acc)}
.phg>div span{width:28px;height:28px;background:var(--bg2);border-radius:50%;display:inline-flex;align-items:center;justify-content:center;margin-bottom:.4rem;font-size:.8rem}
.phg select{width:100%;padding:.25rem;background:var(--bg2);border:1px solid #333;border-radius:4px;color:var(--text2);font-size:.7rem;margin-top:.3rem}
.qr{padding:1rem;background:var(--bg3);border-radius:10px;text-align:center}
.qr button{padding:.75rem 2rem;background:var(--acc);border:none;color:#fff;border-radius:8px;cursor:pointer}
.qr button.pulse{animation:pulse 2s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(99,102,241,.4)}50%{box-shadow:0 0 0 10px rgba(99,102,241,0)}}
/* Review */
.rv{max-width:700px;margin:0 auto}
.rv select{width:100%;padding:.75rem;background:var(--bg2);border:1px solid #333;border-radius:8px;color:var(--text);margin-bottom:1rem}
.fc{background:var(--bg2);border-radius:16px;padding:1.5rem;text-align:center}
.cp{color:var(--text2);margin-bottom:1rem}
.cf,.cb{padding:1.25rem;background:var(--bg3);border-radius:10px}
.cf b,.cb b{display:block;font-size:.75rem;color:var(--text2);margin-bottom:.5rem;text-transform:uppercase}
.cf p,.cb p{font-size:1.1rem;line-height:1.5}
.cb{border-left:3px solid var(--suc);margin-top:1rem}
.ca{display:flex;gap:.75rem;justify-content:center;margin-top:1.5rem;flex-wrap:wrap}
.ca button{padding:.6rem 1.2rem;border:none;border-radius:8px;cursor:pointer;font-weight:500}
.ca button:first-child{background:var(--acc);color:#fff}
.ca button:nth-child(2){background:rgba(34,197,94,.2);color:var(--suc)}
.ca button:nth-child(3){background:rgba(99,102,241,.2);color:var(--acc)}
.cm{display:flex;justify-content:center;gap:.5rem;margin-top:1rem}
.cm button{padding:.4rem .8rem;background:var(--bg3);border:1px solid #444;border-radius:6px;color:var(--text2);cursor:pointer;font-size:.8rem}
.ac{background:var(--bg2);border-radius:12px;padding:1rem;margin-top:1rem}
.ac input,.ac textarea{width:100%;padding:.75rem;background:var(--bg3);border:1px solid #333;border-radius:8px;color:var(--text);margin-bottom:.75rem}
.ac button{margin-right:.5rem;padding:.75rem 1.5rem;background:var(--acc);border:none;color:#fff;border-radius:8px;cursor:pointer}
.allc{background:var(--bg2);border-radius:12px;padding:1rem;margin-top:1rem}
.allc h4{margin-bottom:.75rem;color:var(--text2)}
.allc>div{display:flex;justify-content:space-between;padding:.4rem .6rem;background:var(--bg3);border-radius:6px;margin-bottom:.25rem;font-size:.85rem}
.allc span.due{color:var(--warn);background:rgba(245,158,11,.1);padding:.15rem .5rem;border-radius:4px;font-size:.7rem}
.allc span.ok{color:var(--suc);background:rgba(34,197,94,.1);padding:.15rem .5rem;border-radius:4px;font-size:.7rem}
/* Stats */
.st{max-width:800px;margin:0 auto}
.st h2{margin-bottom:1rem}
.sg{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:1rem;margin-bottom:2rem}
.sg div{background:var(--bg2);border-radius:12px;padding:1.25rem;text-align:center}
.sg b{display:block;font-size:2rem;color:var(--acc)}
.sg span{font-size:.8rem;color:var(--text2)}
.cht{background:var(--bg2);border-radius:12px;padding:1rem;margin-bottom:1rem}
.exbtn{width:100%;padding:.75rem;background:var(--bg2);border:1px solid #333;color:var(--text);border-radius:8px;cursor:pointer}
/* Tools */
.tl{max-width:600px;margin:0 auto}
.tl h2{margin-bottom:1rem}
.tl label{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:var(--bg2);border-radius:8px;margin-bottom:.5rem}
.tl button{padding:.4rem .8rem;background:var(--bg3);border:1px solid #333;border-radius:6px;cursor:pointer}
.kb{background:var(--bg2);border-radius:12px;padding:1rem;margin-top:1rem}
.kb h3{font-size:.9rem;margin-bottom:.5rem}
.kb ul{list-style:none;color:var(--text2)}
.kb li{padding:.25rem 0;font-size:.85rem}
/* Modal */
.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}
.modal>div,.modal>section{background:var(--bg2);border-radius:16px;padding:1.5rem;max-width:500px;width:100%;max-height:80vh;overflow-y:auto}
.modal h2{margin-bottom:1rem}
.modal button{width:100%;padding:.75rem;background:var(--acc);border:none;color:#fff;border-radius:8px;cursor:pointer;margin-top:.5rem}
.tplg{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.75rem}
.tplg .tpl{padding:1rem;background:var(--bg3);border-radius:10px;text-align:center;cursor:pointer;border:2px solid transparent}
.tplg .tpl:hover{border-color:var(--acc)}
.tplg .tpl span{display:block;font-size:2rem;margin-bottom:.5rem}
.tplg .tpl b{font-size:.9rem}
.tplg .tpl p{font-size:.75rem;color:var(--text2)}
.compare-grid{display:flex;flex-direction:column;gap:1rem}
.compare-section h3{font-size:.9rem;color:var(--text2);margin-bottom:.5rem}
.compare-yours{background:var(--bg3);padding:.75rem;border-radius:6px;border-left:3px solid var(--acc);margin-bottom:.75rem}
.compare-philosopher{background:var(--bg2);padding:.5rem .75rem;border-radius:6px;margin-bottom:.5rem}
.compare-philosopher strong{display:block}
.compare-philosopher i{font-size:.85rem;color:var(--text2)}
.compare-philosopher small{display:block;font-size:.8rem;color:var(--acc)}
.philg,.pg{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:.5rem}
.philg>div,.pg>div{background:var(--bg2);padding:.5rem .75rem;border-radius:6px}
.philg strong,.pg strong{display:block;font-size:.85rem}
.philg i,.pg i{font-size:.8rem;color:var(--text2)}
.ql{display:flex;flex-direction:column;gap:.5rem;max-height:300px;overflow-y:auto}
.ql>div{background:var(--bg2);padding:.75rem;border-radius:8px}
.ql i{font-style:italic;display:block;margin-bottom:.25rem}
.ql b{font-size:.85rem;color:var(--text2)}
.exlg{display:flex;flex-direction:column;gap:.75rem;max-height:300px;overflow-y:auto}
.exlg>div{background:var(--bg2);padding:.75rem;border-radius:8px}
.exlg b{display:block;margin-bottom:.25rem}
.exlg p{font-size:.85rem;color:var(--text2);margin-bottom:.5rem}
.tagg{display:flex;gap:.25rem;flex-wrap:wrap}
.tagg span{background:var(--acc);color:#fff;padding:.15rem .4rem;border-radius:4px;font-size:.7rem}
.connections-list{display:flex;flex-direction:column;gap:.5rem}
.connections-list>div{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:var(--bg2);border-radius:6px}
.connections-list span{font-size:.8rem;color:var(--text2);max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.connections-list b{color:var(--acc);font-size:.85rem}
.sr{position:absolute;top:60px;left:50%;transform:translateX(-50%);width:320px;background:var(--bg2);border:1px solid #333;border-radius:10px;z-index:100;max-height:300px;overflow-y:auto}
.sr>div{padding:.75rem 1rem;cursor:pointer;border-bottom:1px solid #333}
.sr>div:hover{background:var(--bg3)}
.es{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--text2);gap:1rem}
.es button{padding:.75rem 1.5rem;background:var(--acc);border:none;color:#fff;border-radius:8px;cursor:pointer}
.mini-btn{font-size:.7rem;padding:.2rem .4rem;background:var(--bg2);border:1px solid #444;border-radius:4px;cursor:pointer;margin-left:.5rem}
.tag{background:var(--bg3);padding:.2rem .5rem;border-radius:4px;font-size:.75rem}
.entry-question,.key-idea{padding:.5rem .75rem;background:var(--bg2);border-radius:6px;margin-bottom:.5rem;font-size:.9rem}
.idea-number{display:inline-flex;width:20px;height:20px;background:var(--acc);color:#fff;border-radius:50%;font-size:.7rem;align-items:center;justify-content:center;margin-right:.5rem}
/* Responsive */
@media(max-width:768px){
.hdr{flex-direction:column;gap:.75rem}
.sb{max-width:none}
.tv{grid-template-columns:1fr}
.tv .sb{position:static;flex-direction:row;overflow-x:auto}
.tv .sb button{white-space:nowrap}
.secg{grid-template-columns:1rem}
.sg{grid-template-columns:repeat(3,1fr)}
.modal>div,.modal>section{margin:1rem}
}
@media(max-width:480px){
.hdr{padding:.5rem}
.hdr h1{font-size:.9rem}
.sg{grid-template-columns:repeat(2,1fr)}
}
